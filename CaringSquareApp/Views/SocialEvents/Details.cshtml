@model CaringSquareApp.Models.SocialEvent

@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section id="contact" class="contact">
    <div class="container">
        <h2 id="freshtitle">Details of your Social Event</h2>

        <div id="element">
            <hr />
            <dl class="dl-horizontal" id="detailslist">
                <dt style="padding: 0 0 0 60px;font-size: 22px;font-weight: 600;margin-bottom: 5px;color: #010483;">
                    @Html.DisplayNameFor(model => model.EventName)
                </dt>

                <dd style="color: #444;font-weight:bold;padding: 0 0 0 70px;">
                    @Html.DisplayFor(model => model.EventName)
                </dd>

                <dt style="padding: 0 0 0 60px;font-size: 22px;font-weight: 600;margin-bottom: 5px;color: #010483;">
                    @Html.DisplayNameFor(model => model.EventDate)
                </dt>

                <dd style="color: #444;font-weight:bold;padding: 0 0 0 70px;">
                    @Html.DisplayFor(model => model.EventDate)
                </dd>

                <dt style="padding: 0 0 0 60px;font-size: 22px;font-weight: 600;margin-bottom: 5px;color: #010483;">
                    @Html.DisplayNameFor(model => model.EventTime)
                </dt>

                <dd style="color: #444;font-weight:bold;padding: 0 0 0 70px;">
                    @Html.DisplayFor(model => model.EventTime)
                </dd>

                <dt style="padding: 0 0 0 60px;font-size: 22px;font-weight: 600;margin-bottom: 5px;color: #010483;">
                    @Html.DisplayNameFor(model => model.AspNetUser.Email)
                </dt>

                <dd style="color: #444;font-weight:bold;padding: 0 0 0 70px;">
                    @Html.DisplayFor(model => model.AspNetUser.Email)
                </dd>

                <dt style="padding: 0 0 0 60px;font-size: 22px;font-weight: 600;margin-bottom: 5px;color: #010483;">
                    @Html.DisplayNameFor(model => model.POIs.Name)
                </dt>

                <dd style="color: #444;font-weight:bold;padding: 0 0 0 70px;">
                    @Html.DisplayFor(model => model.POIs.Name, new { id = "PlaceName" })
                </dd>

                <dt style="padding: 0 0 0 60px;font-size: 22px;font-weight: 600;margin-bottom: 5px;color: #010483;">
                    @Html.DisplayNameFor(model => model.POIs.Address)
                </dt>

                <dd style="color: #444;font-weight:bold;padding: 0 0 0 70px;">
                    @Html.DisplayFor(model => model.POIs.Address, new { id = "PlaceAddress" })
                </dd>

            </dl>
        </div>

        <div>
            <a href="/SocialEvents/Send_Email" id="share-event" class="btn" style="background-color: #94d16a; margin-left:60px;font-weight:bold;">Share Event By Email</a>
            <br/><br/>

        </div>
        <p>
            @Html.ActionLink("Edit This Event", "Edit", new { id = Model.EventId }, new { @class = "btn", @style = "color:#010483;background-color: #f7f7f7; border-color:#000000;margin-left:10px;font-weight:bold;" })
            <a href="/SocialEvents" class="btn" style="color:#010483; background-color:#f7f7f7; border-color:#000000;margin-left:10px;font-weight:bold;">Back to Event List</a>
        </p>


    </div>
    </section>

    <script>

        function init() {
            document.getElementById('share-event').addEventListener('click', event => {
                event.preventDefault();

                const dd = [...document.querySelectorAll('dl')].map(el => el.textContent).filter(Boolean).map(s => s.trim());

                console.log(dd);

                localStorage.setItem('__pageCache', JSON.stringify(dd));

                document.location.href = event.target.getAttribute('href')
            });
        }

        window.addEventListener('DOMContentLoaded', event => {
            init();
        });

    </script>
    <script src="jquery.js"></script>
    <script src="html2canvas.min.js"></script>
    <script src="canvas2image.js"></script>
    <script>
        var tempElement = $('#element').get(0);
        var lebar = "600";
        var tinggi = "400";
        var type = "png";
        var fileName = "htmltoimage";
        html2canvas(tempElement).then(function (canvas) {
            var canWidth = canvas.width;
            var canHeight = canvas.height;
            var img = Canvas2Image.convertToImage(canvas, canWidth, canHeight);
            $('#preview').after(img);
            Canvas2Image.saveAsImage(canvas, lebar, tinggi, type, fileName);

        });

    </script>
